<div ng-controller="overrideUserController as ou" ng-cloak>
    <div class="overrideuser-top-button"
         ng-class="{ 'active' : ou.Panel.Open && (ou.panelCurrent == ou.Panel.Name) }"
         ng-click="$event.stopPropagation(); ou.Panel.Display()">
        <div ng-if="ou.CurrentUser.IsAdmin">
            <div class="fa-layers fa-fw">
                <!--<span class="fa fa-user-md"></span>-->
                <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="people-arrows" class="svg-inline--fa fa-people-arrows fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M96,128A64,64,0,1,0,32,64,64,64,0,0,0,96,128Zm0,176.08a44.11,44.11,0,0,1,13.64-32L181.77,204c1.65-1.55,3.77-2.31,5.61-3.57A63.91,63.91,0,0,0,128,160H64A64,64,0,0,0,0,224v96a32,32,0,0,0,32,32V480a32,32,0,0,0,32,32h64a32,32,0,0,0,32-32V383.61l-50.36-47.53A44.08,44.08,0,0,1,96,304.08ZM480,128a64,64,0,1,0-64-64A64,64,0,0,0,480,128Zm32,32H448a63.91,63.91,0,0,0-59.38,40.42c1.84,1.27,4,2,5.62,3.59l72.12,68.06a44.37,44.37,0,0,1,0,64L416,383.62V480a32,32,0,0,0,32,32h64a32,32,0,0,0,32-32V352a32,32,0,0,0,32-32V224A64,64,0,0,0,512,160ZM444.4,295.34l-72.12-68.06A12,12,0,0,0,352,236v36H224V236a12,12,0,0,0-20.28-8.73L131.6,295.34a12.4,12.4,0,0,0,0,17.47l72.12,68.07A12,12,0,0,0,224,372.14V336H352v36.14a12,12,0,0,0,20.28,8.74l72.12-68.07A12.4,12.4,0,0,0,444.4,295.34Z"></path></svg>
                <span ng-if="ou.OverrideUser.Selected" style="font-size: 10px;">
                    <span class="fa-layers-text" data-fa-mask="fas fa-circle" data-fa-transform="up-30">{{ou.OverrideUser.Selected.CodeAlliance}}</span>
                </span>
            </div>
        </div>
    </div>
    <div class="com-hierarchie-navigation com-override-user ms-dialogHidden"
         ng-class="{'open' : ou.Panel.Open, 'close' : !ou.Panel.Open}"
         ng-if="ou.panelCurrent == ou.Panel.Name">
        <div ng-if="ou.Panel.Open">
            <div class="nav-section nav-section-headernav-section nav-section-header" title="Surcharge acteur">
                <div class="txtContainer">
                    <span>Surcharge acteur</span>
                </div>
            </div>
            <div class="nav-section nav-section-search override-user-content">
                <md-autocomplete id="overrideUser"
                                 md-no-cache="true"
                                 md-selected-item="ou.selectedItem"
                                 md-selected-item-change="ou.OverrideUser.Select(item)"
                                 md-search-text-change="ou.OverrideUser.Search(ou.OverrideUser.SearchText)"
                                 md-search-text="ou.OverrideUser.SearchText"
                                 md-items="item in ou.OverrideUser.Search(ou.OverrideUser.SearchText)"
                                 md-item-text="item.NomPrenom"
                                 md-min-length="3"
                                 placeholder="Selectionner un utilisateur"
                                 md-menu-class="autocomplete-custom-template"
                                 md-menu-container-class="custom-container">
                    <md-item-template>
                        <span class="item-title">
                            <i class="far fa-user"></i>
                        </span>
                        <span class="item-metadata">
                            <span>
                                <strong>{{item.NomPrenom}}</strong>
                            </span>
                        </span>
                    </md-item-template>
                </md-autocomplete>
            </div>
            <div class="nav-section nav-section-main">
                <div class="nav-section-hierarchy override-user-selected">
                    <div class="hierarchy" ng-if="ou.OverrideUser.Selected != null">
                        <div class="title">Acteur sélectionné : </div>
                        <ul>
                            <li>
                                <div class="acteur active">
                                    <div class="icone">
                                        <i class="fa fa-user" aria-hidden="true"></i>
                                    </div>
                                    <div class="titre">
                                        <span ng-bind="ou.OverrideUser.Selected.NomPrenom"></span>
                                        <a ng-click="ou.OverrideUser.Delete()">
                                            <i class="far fa-trash-alt"></i>
                                        </a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div ng-if="ou.OverrideUser.Selected == null">
                        <span>Aucun utilisateur selectionné</span>
                    </div>
                </div>
            </div>
        </div>
        <div ng-if="!ou.Panel.Open">
            <div class="nav-section">
                <div class="nav-header" title="Surchage">&nbsp;</div>
            </div>
            <div class="nav-section-main"></div>
        </div>

        <div class="com-button-open-top" ng-click="ou.Panel.Display()">
            <div ng-if="ou.Panel.Open == true">
                <span class="fa fa-chevron-right"></span>
            </div>
            <div ng-if="ou.Panel.Open == false">
                <span class="fa fa-chevron-left"></span>
            </div>
        </div>
    </div>

</div>